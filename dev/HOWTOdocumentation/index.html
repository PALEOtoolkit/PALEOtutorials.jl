<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Creating and updating PALEO documentation · PALEOtutorials Documentation</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">PALEOtutorials Documentation</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">PALEOtutorials.jl documentation</a></li><li><span class="tocitem">Examples and Tutorials</span><ul><li><a class="tocitem" href="../ExampleInstallConfig/">Installation and initial configuration</a></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">reservoirs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../collated_examples/reservoirs/README/">Reservoirs and fluxes</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-3" type="checkbox"/><label class="tocitem" for="menuitem-2-3"><span class="docs-label">solvers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../collated_examples/solvers/README/">ODE solvers</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-4" type="checkbox"/><label class="tocitem" for="menuitem-2-4"><span class="docs-label">error_examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../collated_examples/error_examples/README/">Configuration Errors</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-5" type="checkbox"/><label class="tocitem" for="menuitem-2-5"><span class="docs-label">CPU</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../collated_examples/CPU/README/">CPU (Carbon, Phosphorus, Uranium) model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-6" type="checkbox"/><label class="tocitem" for="menuitem-2-6"><span class="docs-label">CPU_modular</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../collated_examples/CPU_modular/README/">CPU (Carbon, Phosphorus, Uranium) model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-7" type="checkbox"/><label class="tocitem" for="menuitem-2-7"><span class="docs-label">ocean_chemistry</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../collated_examples/ocean_chemistry/README/">Ocean chemistry</a></li></ul></li></ul></li><li><span class="tocitem">HOWTOS</span><ul><li><a class="tocitem" href="../HOWTOJuliaUsage/">Julia usage</a></li><li><a class="tocitem" href="../HOWTOadditionalconfig/">Optional additional configuration</a></li><li><a class="tocitem" href="../HOWTOminimalGit/">Minimal git workflow for scientific collaboration and reproducibility</a></li><li class="is-active"><a class="tocitem" href>Creating and updating PALEO documentation</a><ul class="internal"><li><a class="tocitem" href="#Structure-of-PALEO-documentation"><span>Structure of PALEO documentation</span></a></li><li><a class="tocitem" href="#Tools-for-PALEO-documentation"><span>Tools for PALEO documentation</span></a></li><li><a class="tocitem" href="#Adding-a-new-top-level-document"><span>Adding a new top-level document</span></a></li><li><a class="tocitem" href="#Documenting-PALEO-code"><span>Documenting PALEO code</span></a></li><li><a class="tocitem" href="#Documenting-PALEO-examples"><span>Documenting PALEO examples</span></a></li></ul></li><li><a class="tocitem" href="../HOWTOPython/">Configuring for Julia - python interoperability</a></li></ul></li><li><a class="tocitem" href="../References/">References</a></li><li><a class="tocitem" href="../indexpage/">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">HOWTOS</a></li><li class="is-active"><a href>Creating and updating PALEO documentation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Creating and updating PALEO documentation</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/PALEOtoolkit/PALEOtutorials.jl/blob/main/docs/src/HOWTOdocumentation.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Creating-and-updating-PALEO-documentation"><a class="docs-heading-anchor" href="#Creating-and-updating-PALEO-documentation">Creating and updating PALEO documentation</a><a id="Creating-and-updating-PALEO-documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-and-updating-PALEO-documentation" title="Permalink"></a></h1><h2 id="Structure-of-PALEO-documentation"><a class="docs-heading-anchor" href="#Structure-of-PALEO-documentation">Structure of PALEO documentation</a><a id="Structure-of-PALEO-documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Structure-of-PALEO-documentation" title="Permalink"></a></h2><p>Each PALEO repository follows the same structure and uses the same tools, just with different content.</p><p>PALEO documentation broadly follows the four-way split into tutorials, how-to guides, technical reference and explanation proposed by <a href="https://documentation.divio.com/">Divio</a></p><p>The PALEO-specific version of this is:</p><ul><li>Tutorials    -&gt; Examples (collated from <code>README.md</code> in subfolders under <code>./examples/</code> or <code>./PALEOexamples/</code>) </li><li>HOWTO guides -&gt; HOWTOS (markdown documents in <code>docs/src/</code> with HOWTO prefix)</li><li>Explanation  -&gt; Design (markdown documents in <code>docs/src/</code> eg <a href="https://paleotoolkit.github.io/PALEOboxes.jl/stable/DesignOverview/">https://paleotoolkit.github.io/PALEOboxes.jl/stable/DesignOverview/</a>)</li><li>Reference    -&gt; Reference (markdown document(s) in <code>docs/src/</code> with a hand-crafted structure and most of the text autogenerated from docstrings in the Julia code)</li></ul><h2 id="Tools-for-PALEO-documentation"><a class="docs-heading-anchor" href="#Tools-for-PALEO-documentation">Tools for PALEO documentation</a><a id="Tools-for-PALEO-documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Tools-for-PALEO-documentation" title="Permalink"></a></h2><p>The overall principle here is keep documentation minimal, and avoid duplication (which just rapidly goes out of date).</p><p>The documentation is created by the Julia <a href="https://documenter.juliadocs.org/stable/">Documenter.jl</a> package, from scripts and markdown documents in the <code>./docs/</code> folder. </p><ul><li><code>./docs/make.jl</code> specifies the structure, and the markdown files to include.</li><li><code>./docs/src/</code> contains the documentation source files in <a href="https://docs.julialang.org/en/v1/stdlib/Markdown/#markdown_stdlib">Markdown</a></li><li><code>./docs/src/paleo_references.bib</code> is a (hand-generated) bibtex bibliography, used by <a href="http://aliramadhan.me/DocumenterCitations.jl/dev/">DocumenterCitations.jl</a> to provide citations.</li><li>code is documented using Julia docstrings, see the <a href="https://docs.julialang.org/en/v1/manual/documentation/">documentation</a> section in the Julia manual.</li></ul><h3 id="Creating-and-viewing-documentation-locally"><a class="docs-heading-anchor" href="#Creating-and-viewing-documentation-locally">Creating and viewing documentation locally</a><a id="Creating-and-viewing-documentation-locally-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-and-viewing-documentation-locally" title="Permalink"></a></h3><ul><li>activate the <code>./docs/</code> environment (eg right click in VS code)</li><li>change directory to the <code>./docs/</code> folder</li><li><code>julia&gt; include(&quot;make.jl&quot;)</code></li></ul><p>Output is created in the <code>./docs/build/</code> folder, <code>index.html</code> in this folder is the top of the html documentation tree.</p><p>There are two options to view this locally in a web browser:</p><ul><li>Navigate to <code>./docs/build/</code> in a file browser, and click on <code>index.html</code>. </li><li>Install the VS Code <code>Liveserver</code> plugin, and right-click in the VS code file browser and select <code>Open with Live Server</code></li></ul><h3 id="Publishing-documentation-on-github"><a class="docs-heading-anchor" href="#Publishing-documentation-on-github">Publishing documentation on github</a><a id="Publishing-documentation-on-github-1"></a><a class="docs-heading-anchor-permalink" href="#Publishing-documentation-on-github" title="Permalink"></a></h3><p>The public PALEO repositories (eg PALEOcopse) include a github workflow file (in <code>.github/workflows/documentation.yml</code>) that runs the build process on github, and then publishes the output to github pages.  This runs automatically when a new release is created.</p><h2 id="Adding-a-new-top-level-document"><a class="docs-heading-anchor" href="#Adding-a-new-top-level-document">Adding a new top-level document</a><a id="Adding-a-new-top-level-document-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-a-new-top-level-document" title="Permalink"></a></h2><ul><li><p>Create a new markdown file in the <code>./docs/</code> subfolder.</p></li><li><p>Update <code>./docs/make.jl</code> to add this file at the relevant point in the documentation tree</p></li></ul><h2 id="Documenting-PALEO-code"><a class="docs-heading-anchor" href="#Documenting-PALEO-code">Documenting PALEO code</a><a id="Documenting-PALEO-code-1"></a><a class="docs-heading-anchor-permalink" href="#Documenting-PALEO-code" title="Permalink"></a></h2><p>Code eg PALEO reactions is documented using Julia docstrings, see the <a href="https://docs.julialang.org/en/v1/manual/documentation/">documentation</a> section in the Julia manual.</p><p>There are then two parts to this:</p><ol><li><p>Add docstrings in the <code>.jl</code> code files. There are some PALEO-specific extensions implemented to make it easy to document PALEO reaction Parameters and Variables,  each module should contain <code>using PALEOboxes.DocStrings</code> to make these available. The docstring can then contain:</p><pre><code class="nohighlight hljs"> # Parameters
 $(PARS)

 # Methods and Variables
 $(METHODS_DO)</code></pre><p>which will automatically generate documentation from the <code>description</code> and <code>units</code> fields.</p></li><li><p>Update the top-level Reference documentation (markdown file(s) under <code>./docs</code>) to include the new Reactions etc. This will expand into the docstring content.</p></li></ol><h2 id="Documenting-PALEO-examples"><a class="docs-heading-anchor" href="#Documenting-PALEO-examples">Documenting PALEO examples</a><a id="Documenting-PALEO-examples-1"></a><a class="docs-heading-anchor-permalink" href="#Documenting-PALEO-examples" title="Permalink"></a></h2><p>The mimimal, lightweight approach to documenting examples is to <strong>add a README.md to the subfolder</strong>.  Suggest think of this like a lab book.</p><p>This can then be used in multiple ways:</p><ul><li>view locally, either as raw markdown, or use VS code to render a preview (right click on the <code>.md</code> file).</li><li>github will show a <code>README.md</code> by default when you browse to that folder on github.com</li><li>the top-level documentation build script automatically collates all markdown documents it finds in examples subfolders into a browseable tree on the documentation web pages.</li></ul><p>It is straightforward to add images to the <code>README.md</code>:</p><ul><li>create an <code>images/</code> subfolder</li><li>save images into this folder (<code>.svg</code> or <code>.png</code>)</li><li>add a link in the <code>README.md</code> eg <code>![Modern Earth sensitivity study](images/modEarth_compare.png)</code></li></ul><p>NB: please check file sizes, and think whether the extra size in the PALEO repository is justitifed...</p><h3 id="Adding-&quot;online&quot;-scripts-and-output"><a class="docs-heading-anchor" href="#Adding-&quot;online&quot;-scripts-and-output">Adding &quot;online&quot; scripts and output</a><a id="Adding-&quot;online&quot;-scripts-and-output-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-&quot;online&quot;-scripts-and-output" title="Permalink"></a></h3><p>The PALEOtutorials repository exploits <a href="https://documenter.juliadocs.org/stable/syntax">Documenter.jl</a> syntax to add additional information in the <code>README.md</code> files to show the contents of files, and to run scripts and include text output and plots in the published web pages.</p><p>Examples from <a href="https://paleotoolkit.github.io/PALEOtutorials.jl/dev/collated_examples/ocean_chemistry/README/">PALEOtutorials</a>:</p><ul><li>To show the content of files in a block in the rendered output:</li></ul><pre><code class="language-markdown hljs">```@eval
import Markdown
Markdown.parse(
    &quot;&quot;&quot;```julia
    $(read(joinpath(ENV[&quot;PALEO_EXAMPLES&quot;], &quot;ocean_chemistry/run_ex2.jl&quot;), String))
    ```&quot;&quot;&quot;
)
```</code></pre><p>NB: the <code>ENV[&quot;PALEO_EXAMPLES&quot;]</code> prefix to the path added with <code>joinpath</code> is key here, where <code>ENV[&quot;PALEO_EXAMPLES&quot;]</code> defines the full path to the <code>examples/</code> folder. To read and display just part of a file, use:</p><pre><code class="language-markdown hljs">```@eval
import Markdown
Markdown.parse(
    &quot;&quot;&quot;```julia
    $(join(readlines(joinpath(ENV[&quot;PALEO_EXAMPLES&quot;], &quot;ocean_chemistry/config_ex1.yaml&quot;); keep=true)[5:19]))  # only lines 5:19 from config_ex1.yaml
    ```&quot;&quot;&quot;
)
```</code></pre><ul><li>To run a script and include output and figures:</li></ul><pre><code class="language-markdown hljs">```@example ex2
include(joinpath(ENV[&quot;PALEO_EXAMPLES&quot;], &quot;ocean_chemistry/run_ex2.jl&quot;)) # hide
plot(paleorun.output, [&quot;ocean.TAlk_conc&quot;, &quot;ocean.DIC_conc&quot;], (cell=1,); ylabel=&quot;TAlk, DIC conc (mol m-3)&quot;) # hide
savefig(&quot;ex2_plot1.svg&quot;); nothing  # hide
plot(paleorun.output, &quot;ocean.pH&quot;, (cell=1,)) # hide
savefig(&quot;ex2_plot2.svg&quot;); nothing  # hide
plot(paleorun.output, [&quot;ocean.DIC_conc&quot;, &quot;ocean.HCO3_conc&quot;, &quot;ocean.CO3_conc&quot;, &quot;ocean.CO2_aq_conc&quot;], (cell=1,); ylabel=&quot;DIC species (mol m-3)&quot;) # hide
savefig(&quot;ex2_plot3.svg&quot;); nothing  # hide
display(plot(paleorun.output, &quot;atm.pCO2atm&quot;))  # hide
savefig(&quot;ex2_plot4.svg&quot;); nothing  # hide
display(plot(paleorun.output, [&quot;global.C_total&quot;, &quot;atm.CO2&quot;, &quot;ocean.DIC_total&quot;]; ylabel=&quot;atm-ocean carbon (mol)&quot;))
savefig(&quot;ex2_plot5.svg&quot;); nothing  # hide
```

![](ex2_plot1.svg)
![](ex2_plot2.svg)
![](ex2_plot3.svg)
![](ex2_plot4.svg)
![](ex2_plot5.svg)</code></pre><p>NB: to include plots produced by a script whilst keeping the script useful for interactive use, the plotting code has been duplicated in the <code>.md</code> file with additional options to save the figures to <code>.svg</code> files.</p><p>NB: if new code files defining PALEO reactions are required, create a <code>doc_include.jl</code> as described below.</p><ul><li>To make new code files available to document code using docstrings and to make new PALEO reactions available for use in runnable scripts: create a <code>doc_include.jl</code> file in the example subfolder, which contains <code>include(&quot;my_new_code_file.jl&quot;)</code> for each code file with new Reactions etc.</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../HOWTOminimalGit/">« Minimal git workflow for scientific collaboration and reproducibility</a><a class="docs-footer-nextpage" href="../HOWTOPython/">Configuring for Julia - python interoperability »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Thursday 8 June 2023 15:54">Thursday 8 June 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
