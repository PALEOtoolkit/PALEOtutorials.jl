<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Configuration Errors · PALEOtutorials Documentation</title><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">PALEOtutorials Documentation</a></span></div><form class="docs-search" action="../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../">PALEOtutorials.jl documentation</a></li><li><span class="tocitem">Examples and Tutorials</span><ul><li><a class="tocitem" href="../../../ExampleInstallConfig/">Installation and initial configuration</a></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">reservoirs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../reservoirs/README/">Reservoirs and fluxes</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-3" type="checkbox"/><label class="tocitem" for="menuitem-2-3"><span class="docs-label">solvers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../solvers/README/">ODE solvers</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-4" type="checkbox" checked/><label class="tocitem" for="menuitem-2-4"><span class="docs-label">error_examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Configuration Errors</a><ul class="internal"><li><a class="tocitem" href="#Syntax-error-in-.yaml-config-file"><span>Syntax error in .yaml config file</span></a></li><li><a class="tocitem" href="#Missing-/-unlinked-Variables"><span>Missing / unlinked Variables</span></a></li><li><a class="tocitem" href="#A-duplicated-Variable-or-a-name-collision"><span>A duplicated Variable or a name collision</span></a></li><li><a class="tocitem" href="#Mismatch-in-:field_data-Type-(eg-isotopes)-(Reservoir)"><span>Mismatch in :field_data Type (eg isotopes) (Reservoir)</span></a></li><li><a class="tocitem" href="#Mismatch-in-:field_data-Type-(eg-isotopes)-(Flux)"><span>Mismatch in :field_data Type (eg isotopes) (Flux)</span></a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-5" type="checkbox"/><label class="tocitem" for="menuitem-2-5"><span class="docs-label">CPU</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../CPU/README/">CPU (Carbon, Phosphorus, Uranium) model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-6" type="checkbox"/><label class="tocitem" for="menuitem-2-6"><span class="docs-label">CPU_modular</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../CPU_modular/README/">CPU (Carbon, Phosphorus, Uranium) model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-7" type="checkbox"/><label class="tocitem" for="menuitem-2-7"><span class="docs-label">ocean_chemistry</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ocean_chemistry/README/">Ocean chemistry</a></li></ul></li></ul></li><li><span class="tocitem">HOWTOS</span><ul><li><a class="tocitem" href="../../../HOWTOJuliaUsage/">Julia usage</a></li><li><a class="tocitem" href="../../../HOWTOadditionalconfig/">Optional additional configuration</a></li><li><a class="tocitem" href="../../../HOWTOminimalGit/">Minimal git workflow for scientific collaboration and reproducibility</a></li><li><a class="tocitem" href="../../../HOWTOdocumentation/">Creating and updating PALEO documentation</a></li><li><a class="tocitem" href="../../../HOWTOPython/">Configuring for Julia - python interoperability</a></li></ul></li><li><a class="tocitem" href="../../../References/">References</a></li><li><a class="tocitem" href="../../../indexpage/">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples and Tutorials</a></li><li><a class="is-disabled">error_examples</a></li><li class="is-active"><a href>Configuration Errors</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Configuration Errors</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/PALEOtoolkit/PALEOtutorials.jl/blob/main/docs/src/collated_examples/error_examples/README.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Configuration-Errors"><a class="docs-heading-anchor" href="#Configuration-Errors">Configuration Errors</a><a id="Configuration-Errors-1"></a><a class="docs-heading-anchor-permalink" href="#Configuration-Errors" title="Permalink"></a></h1><p>These examples illustrate common configuration errors, for various misconfigurations of <a href="../../reservoirs/README/#Example-5-Isotopes-and-Rayleigh-fractionation">Example 5 Isotopes and Rayleigh fractionation</a></p><h2 id="Syntax-error-in-.yaml-config-file"><a class="docs-heading-anchor" href="#Syntax-error-in-.yaml-config-file">Syntax error in .yaml config file</a><a id="Syntax-error-in-.yaml-config-file-1"></a><a class="docs-heading-anchor-permalink" href="#Syntax-error-in-.yaml-config-file" title="Permalink"></a></h2><p>The model configuration (file <code>examples/error_examples/config_ex5_syntax_error.yaml</code>) contains a syntax error in the .yaml config file, hence the initial parsing of the file fails.</p><pre><code class="language-julia hljs">############################################
# Example 5
# First order decay of a scalar variable
# with transfer of flux to a second variable
# Two domains, with isotopes
###########################################

example5_syntax_error:
    parameters:
        EIsotope: IsotopeLinear    # hypothetical element E
    domains:
        fluxBoxes:
            # yaml is whitespace sensitive, so this generates a syntax error
            reactions: 
                flux:
                    class: ReactionFluxTarget
                    parameters:
                        target_prefix: flux_
                         fluxlist: [&quot;B::EIsotope&quot;] # extra space

        global:
            reactions:
                sum_E:
                    class: ReactionSum
                    parameters:
                        vars_to_add: [&quot;Box1.A&quot;, &quot;Box2.B&quot;]
                    variable_links:
                        sum: E_total

        Box1:
            # scalar domain
            
            reactions:
                reservoir_A:
                    class: ReactionReservoirScalar
                    parameters:
                        field_data:         external%EIsotope
                    variable_links:
                        R*: A*
                    variable_attributes:
                        R:initial_value:    10.0
                        R:norm_value:       10.0            

                Adecay:
                    class: ReactionExample5
                    parameters:
                        field_data:         external%EIsotope
                        kappa:              0.5
                    variable_links:
                        input_particle*:    A*
                        output_flux:        fluxBoxes.flux_B
                    

        Box2:
            # scalar domain
        
            reactions:

                reservoir_B:
                    class: ReactionReservoirScalar
                    parameters:
                        field_data: external%EIsotope
                    variable_links:
                        R*: B*
                    variable_attributes:
                        R:initial_value:  0.0
                        R:norm_value:     10.0

                transfer_fluxBoxes:
                    class: ReactionFluxTransfer
                    parameters:
                        input_fluxes: fluxBoxes.flux_$fluxname$
                        output_fluxes: $fluxname$_sms</code></pre><p>This results in an error when the file is parsed (note that the informative message indicating that there is a problem with the YAML parsing is near the top of the stack trace):</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt;       include(joinpath(ENV[&quot;PALEO_EXAMPLES&quot;], &quot;error_examples/run_ex5_syntax_error.jl&quot;))</code><code class="nohighlight hljs ansi" style="display:block;">WARNING: using StaticArrays.setindex in module FiniteDiff conflicts with an existing identifier.
┌ Warning: Replacing docs for `SciMLBase.sol :: Union{Tuple, Tuple{D}, Tuple{S}, Tuple{N}, Tuple{T}} where {T, N, S, D}` in module `SciMLBase`
└ @ Base.Docs docs/Docs.jl:240
[ Info: ================================================================================
[ Info: create_model_from_config file(s) [&quot;/home/runner/work/PALEOtutorials.jl/PALEOtutorials.jl/examples/error_examples/config_ex5_syntax_error.yaml&quot;] configmodel example5_syntax_error
[ Info: ================================================================================
ERROR: LoadError: YAML.ParserError while reading .yaml config file(s) [&quot;/home/runner/work/PALEOtutorials.jl/PALEOtutorials.jl/examples/error_examples/config_ex5_syntax_error.yaml&quot;].
If the error isn&#39;t obvious by looking at the file(s) (often this is a whitespace issue), try an online YAML validator eg http://www.yamllint.com
in expression starting at /home/runner/work/PALEOtutorials.jl/PALEOtutorials.jl/examples/error_examples/run_ex5_syntax_error.jl:11</code></pre><h2 id="Missing-/-unlinked-Variables"><a class="docs-heading-anchor" href="#Missing-/-unlinked-Variables">Missing / unlinked Variables</a><a id="Missing-/-unlinked-Variables-1"></a><a class="docs-heading-anchor-permalink" href="#Missing-/-unlinked-Variables" title="Permalink"></a></h2><p>The model configuration (file <code>examples/error_examples/config_ex5_reservoir_A_missing.yaml</code>) omits a <code>ReactionReservoirScalar</code>, resulting in Variable Dependencies and Contributors with no corresponding Properties and Targets.</p><pre><code class="language-julia hljs">##################################################################
# ../reservoirs/config_ex5.yaml with common configuration errors
#################################################################

example5_reservoir_A_missing:
    parameters:
        EIsotope: IsotopeLinear    # hypothetical element E
    domains:
        fluxBoxes:
            reactions:
                flux:
                    class: ReactionFluxTarget
                    parameters:
                        target_prefix: flux_
                        fluxlist: [&quot;B::EIsotope&quot;]

        global:
            reactions:
                # remove this to check that &#39;missing A&#39; is also correctly handled elsewhere
                # sum_E:
                #     class: ReactionSum
                #     parameters:
                #         vars_to_add: [&quot;Box1.A&quot;, &quot;Box2.B&quot;]
                #     variable_links:
                #         sum: E_total

        Box1:
            # scalar domain
            
            reactions:
                # configuration error: no reservoir_A
                # reservoir_A:
                #     class: ReactionReservoirScalar
                #     parameters:
                #         field_data:         external%EIsotope
                #     variable_links:
                #         R*: A*
                #     variable_attributes:
                #         R:initial_value:    10.0
                #         R:norm_value:       10.0
                #         R:initial_delta:    -10.0            

                Adecay:
                    class: ReactionExample5
                    parameters:
                        field_data:         external%EIsotope
                        kappa:              0.5
                    variable_links:
                        input_particle*:    A*
                        output_flux:        fluxBoxes.flux_B
                    

        Box2:
            # scalar domain
        
            reactions:

                reservoir_B:
                    class: ReactionReservoirScalar
                    parameters:
                        field_data: external%EIsotope
                    variable_links:
                        R*: B*
                    variable_attributes:
                        R:initial_value:  0.0
                        R:norm_value:     10.0
                        R:initial_delta:  0.0

                transfer_fluxBoxes:
                    class: ReactionFluxTransfer
                    parameters:
                        input_fluxes: fluxBoxes.flux_$fluxname$
                        output_fluxes: $fluxname$_sms</code></pre><p>This results in an error when the Variables are linked:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt;       include(joinpath(ENV[&quot;PALEO_EXAMPLES&quot;], &quot;error_examples/run_ex5_reservoir_A_missing.jl&quot;))</code><code class="nohighlight hljs ansi" style="display:block;">[ Info: ================================================================================
[ Info: create_model_from_config file(s) [&quot;/home/runner/work/PALEOtutorials.jl/PALEOtutorials.jl/examples/error_examples/config_ex5_reservoir_A_missing.yaml&quot;] configmodel example5_reservoir_A_missing
[ Info: ================================================================================
[ Info:     Model parameter: EIsotope             = IsotopeLinear
[ Info: generated Reaction catalog with 29 Reactions
[ Info: creating domain &#39;global&#39; ID=1
┌ Warning: create_domain_from_config Domain &#39;global&#39; empty &#39;reactions:&#39; key in .yaml file
└ @ PALEOboxes ~/.julia/packages/PALEOboxes/kPOmB/src/Domain.jl:315
[ Info: creating domain &#39;fluxBoxes&#39; ID=2
[ Info:   creating reaction fluxBoxes.reactions.flux classname ReactionFluxTarget
[ Info:     set parameters: [config.yaml]  fluxlist            =[&quot;B::EIsotope&quot;]
[ Info:     set parameters: [config.yaml]  target_prefix       =flux_
[ Info:     set parameters: [Default]      flux_totals         =false
[ Info:     set parameters: [Default]      const_stub          =false
[ Info: creating domain &#39;Box2&#39; ID=3
[ Info:   creating reaction Box2.reactions.reservoir_B classname ReactionReservoirScalar
[ Info:     set parameters: [config.yaml]  field_data          =external%EIsotope
[ Info:       expandvalue: external%EIsotope -&gt; IsotopeLinear
[ Info:       after substitution field_data=IsotopeLinear
[ Info:     set parameters: [Default]      const               =false
[ Info:   creating reaction Box2.reactions.transfer_fluxBoxes classname ReactionFluxTransfer
[ Info:     set parameters: [config.yaml]  input_fluxes        =fluxBoxes.flux_$fluxname$
[ Info:     set parameters: [config.yaml]  output_fluxes       =$fluxname$_sms
[ Info:     set parameters: [Default]      transfer_multiplier =1.0
[ Info:     set parameters: [Default]      transfer_matrix     =Identity
[ Info: creating domain &#39;Box1&#39; ID=4
[ Info:   creating reaction Box1.reactions.Adecay classname ReactionExample5
[ Info:     set parameters: [config.yaml]  kappa               =0.5
[ Info:     set parameters: [config.yaml]  field_data          =external%EIsotope
[ Info:       expandvalue: external%EIsotope -&gt; IsotopeLinear
[ Info:       after substitution field_data=IsotopeLinear
[ Info:     set parameters: [Default]      Delta               =-10.0
[ Info: link_variables first pass
[ Info: link_variables initialize dynamic variables
[ Info: _configure_variables: ReactionReservoirScalar Box2.reservoir_B
[ Info:     set variable_links: R                    -&gt; B
[ Info:     set variable_links: R_sms                -&gt; B_sms
[ Info:     set variable_links: R_norm               -&gt; B_norm
[ Info:     set variable_links: R_delta              -&gt; B_delta
[ Info:     set attribute: R                    :norm_value           = 10.0                 
[ Info:     set attribute: R                    :initial_value        = 0.0                  
[ Info:     set attribute: R                    :initial_delta        = 0.0                  
[ Info: _configure_variables: ReactionExample5 Box1.Adecay
[ Info:     set variable_links: input_particle       -&gt; A
[ Info:     set variable_links: input_particle_sms   -&gt; A_sms
[ Info:     set variable_links: input_particle_delta -&gt; A_delta
[ Info:     set variable_links: output_flux          -&gt; fluxBoxes.flux_B
[ Info: link_variables second pass:
[ Info: link_variables unlinked variables:
[ Info: ================================================================================
[ Info: allocate_variables! (modeldata arrays_idx=1)
[ Info: ================================================================================
[ Info: Domain global               data dimensions PALEOboxes.NamedDimension[] allocating 0    variables (hostdep=nothing)
[ Info: Domain fluxBoxes            data dimensions PALEOboxes.NamedDimension[] allocating 1    variables (hostdep=nothing)
[ Info: Domain Box2                 data dimensions PALEOboxes.NamedDimension[] allocating 4    variables (hostdep=nothing)
[ Info: Domain Box1                 data dimensions PALEOboxes.NamedDimension[] allocating 4    variables (hostdep=nothing)
[ Info:     set :field_data=PALEOboxes.ScalarData for host-dependent Variable Box1.A_delta
┌ Warning: check_ready: unexpected host-dependent Variable Box1.A_sms (usually an unlinked Variable due to eg a missing renaming in the :variable_links sections in the .yaml file, a spelling mistake either in a Variable default name in the code or renaming in the .yaml file, or a missing Reaction)
│ 	PALEOboxes.VariableDomContribTarget &quot;Box1.A_sms&quot; links:
│ 		target:		nothing
│ 		contributors:	[&quot;Box1.Adecay.do_example5.input_particle_sms&quot;]
│ 		dependencies:	String[]
└ @ PALEOboxes ~/.julia/packages/PALEOboxes/kPOmB/src/Model.jl:398
┌ Warning: check_ready: unexpected host-dependent Variable Box1.A (usually an unlinked Variable due to eg a missing renaming in the :variable_links sections in the .yaml file, a spelling mistake either in a Variable default name in the code or renaming in the .yaml file, or a missing Reaction)
│ 	PALEOboxes.VariableDomPropDep &quot;Box1.A&quot; links:
│ 		property:	nothing
│ 		dependencies:	[&quot;Box1.Adecay.do_example5.input_particle&quot;]
└ @ PALEOboxes ~/.julia/packages/PALEOboxes/kPOmB/src/Model.jl:398
┌ Warning: check_ready: unexpected host-dependent Variable Box1.A_delta (usually an unlinked Variable due to eg a missing renaming in the :variable_links sections in the .yaml file, a spelling mistake either in a Variable default name in the code or renaming in the .yaml file, or a missing Reaction)
│ 	PALEOboxes.VariableDomPropDep &quot;Box1.A_delta&quot; links:
│ 		property:	nothing
│ 		dependencies:	[&quot;Box1.Adecay.do_example5.input_particle_delta&quot;]
└ @ PALEOboxes ~/.julia/packages/PALEOboxes/kPOmB/src/Model.jl:398
┌ Error: check_ready failed
└ @ PALEOboxes ~/.julia/packages/PALEOboxes/kPOmB/src/Model.jl:406
ERROR: LoadError: check_ready failed
in expression starting at /home/runner/work/PALEOtutorials.jl/PALEOtutorials.jl/examples/error_examples/run_ex5_reservoir_A_missing.jl:20</code></pre><h2 id="A-duplicated-Variable-or-a-name-collision"><a class="docs-heading-anchor" href="#A-duplicated-Variable-or-a-name-collision">A duplicated Variable or a name collision</a><a id="A-duplicated-Variable-or-a-name-collision-1"></a><a class="docs-heading-anchor-permalink" href="#A-duplicated-Variable-or-a-name-collision" title="Permalink"></a></h2><p>The model configuration (file <code>examples/error_examples/config_ex5_reservoir_A_duplicate.yaml</code>) contains two copies of a <code>ReactionReservoirScalar</code>, both attempting to create the same VariableDomains</p><pre><code class="language-julia hljs">##################################################################
# ../reservoirs/config_ex5.yaml with common configuration errors
#################################################################

example5_reservoir_A_duplicate:
    parameters:
        EIsotope: IsotopeLinear    # hypothetical element E
    domains:
        fluxBoxes:
            reactions:
                flux:
                    class: ReactionFluxTarget
                    parameters:
                        target_prefix: flux_
                        fluxlist: [&quot;B::EIsotope&quot;]

        global:
            reactions:
                sum_E:
                    class: ReactionSum
                    parameters:
                        vars_to_add: [&quot;Box1.A&quot;, &quot;Box2.B&quot;]
                    variable_links:
                        sum: E_total

        Box1:
            # scalar domain
            
            reactions:
                reservoir_A:
                    class: ReactionReservoirScalar
                    parameters:
                        field_data:         external%EIsotope
                    variable_links:
                        R*: A*
                    variable_attributes:
                        R:initial_value:    10.0
                        R:norm_value:       10.0

                # configuration error: duplicate reservoir_A
                reservoir_Adup:
                    class: ReactionReservoirScalar
                    parameters:
                        field_data:         external%EIsotope
                    variable_links:
                        R*: A*
                    variable_attributes:
                        R:initial_value:    10.0
                        R:norm_value:       10.0     

                Adecay:
                    class: ReactionExample5
                    parameters:
                        field_data:         external%EIsotope
                        kappa:              0.5
                    variable_links:
                        input_particle*:    A*
                        output_flux:        fluxBoxes.flux_B
                    

        Box2:
            # scalar domain
        
            reactions:

                reservoir_B:
                    class: ReactionReservoirScalar
                    parameters:
                        field_data: external%EIsotope
                    variable_links:
                        R*: B*
                    variable_attributes:
                        R:initial_value:  0.0
                        R:norm_value:     10.0

                transfer_fluxBoxes:
                    class: ReactionFluxTransfer
                    parameters:
                        input_fluxes: fluxBoxes.flux_$fluxname$
                        output_fluxes: $fluxname$_sms</code></pre><p>This results in an error when the Variables are linked:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt;       include(joinpath(ENV[&quot;PALEO_EXAMPLES&quot;], &quot;error_examples/run_ex5_reservoir_A_duplicate.jl&quot;))</code><code class="nohighlight hljs ansi" style="display:block;">[ Info: ================================================================================
[ Info: create_model_from_config file(s) [&quot;/home/runner/work/PALEOtutorials.jl/PALEOtutorials.jl/examples/error_examples/config_ex5_reservoir_A_duplicate.yaml&quot;] configmodel example5_reservoir_A_duplicate
[ Info: ================================================================================
[ Info:     Model parameter: EIsotope             = IsotopeLinear
[ Info: generated Reaction catalog with 29 Reactions
[ Info: creating domain &#39;global&#39; ID=1
[ Info:   creating reaction global.reactions.sum_E classname ReactionSum
[ Info:     set parameters: [config.yaml]  vars_to_add         =[&quot;Box1.A&quot;, &quot;Box2.B&quot;]
[ Info:     set parameters: [Default]      vars_prefix         =
[ Info:     set parameters: [Default]      component_to_add    =0
[ Info:     set parameters: [Default]      vectorsum           =false
[ Info: creating domain &#39;fluxBoxes&#39; ID=2
[ Info:   creating reaction fluxBoxes.reactions.flux classname ReactionFluxTarget
[ Info:     set parameters: [config.yaml]  fluxlist            =[&quot;B::EIsotope&quot;]
[ Info:     set parameters: [config.yaml]  target_prefix       =flux_
[ Info:     set parameters: [Default]      flux_totals         =false
[ Info:     set parameters: [Default]      const_stub          =false
[ Info: creating domain &#39;Box2&#39; ID=3
[ Info:   creating reaction Box2.reactions.reservoir_B classname ReactionReservoirScalar
[ Info:     set parameters: [config.yaml]  field_data          =external%EIsotope
[ Info:       expandvalue: external%EIsotope -&gt; IsotopeLinear
[ Info:       after substitution field_data=IsotopeLinear
[ Info:     set parameters: [Default]      const               =false
[ Info:   creating reaction Box2.reactions.transfer_fluxBoxes classname ReactionFluxTransfer
[ Info:     set parameters: [config.yaml]  input_fluxes        =fluxBoxes.flux_$fluxname$
[ Info:     set parameters: [config.yaml]  output_fluxes       =$fluxname$_sms
[ Info:     set parameters: [Default]      transfer_multiplier =1.0
[ Info:     set parameters: [Default]      transfer_matrix     =Identity
[ Info: creating domain &#39;Box1&#39; ID=4
[ Info:   creating reaction Box1.reactions.Adecay classname ReactionExample5
[ Info:     set parameters: [config.yaml]  kappa               =0.5
[ Info:     set parameters: [config.yaml]  field_data          =external%EIsotope
[ Info:       expandvalue: external%EIsotope -&gt; IsotopeLinear
[ Info:       after substitution field_data=IsotopeLinear
[ Info:     set parameters: [Default]      Delta               =-10.0
[ Info:   creating reaction Box1.reactions.reservoir_Adup classname ReactionReservoirScalar
[ Info:     set parameters: [config.yaml]  field_data          =external%EIsotope
[ Info:       expandvalue: external%EIsotope -&gt; IsotopeLinear
[ Info:       after substitution field_data=IsotopeLinear
[ Info:     set parameters: [Default]      const               =false
[ Info:   creating reaction Box1.reactions.reservoir_A classname ReactionReservoirScalar
[ Info:     set parameters: [config.yaml]  field_data          =external%EIsotope
[ Info:       expandvalue: external%EIsotope -&gt; IsotopeLinear
[ Info:       after substitution field_data=IsotopeLinear
[ Info:     set parameters: [Default]      const               =false
[ Info: reaction global.sum_E add 1.0 * Box1.A
[ Info: reaction global.sum_E add 1.0 * Box2.B
[ Info: link_variables first pass
ERROR: LoadError: Duplicate variable name: Linking VariableReactProperty Box1.reservoir_A.do_reactionreservoirscalar.R_norm --&gt; Box1.A_norm
    Variable Box1.A_norm already exists and has a property Variable, links:
	PALEOboxes.VariableDomPropDep &quot;Box1.A_norm&quot; links:
		property:	&quot;Box1.reservoir_Adup.do_reactionreservoirscalar.R_norm&quot;
		dependencies:	String[]

in expression starting at /home/runner/work/PALEOtutorials.jl/PALEOtutorials.jl/examples/error_examples/run_ex5_reservoir_A_duplicate.jl:11</code></pre><h2 id="Mismatch-in-:field_data-Type-(eg-isotopes)-(Reservoir)"><a class="docs-heading-anchor" href="#Mismatch-in-:field_data-Type-(eg-isotopes)-(Reservoir)">Mismatch in :field_data Type (eg isotopes) (Reservoir)</a><a id="Mismatch-in-:field_data-Type-(eg-isotopes)-(Reservoir)-1"></a><a class="docs-heading-anchor-permalink" href="#Mismatch-in-:field_data-Type-(eg-isotopes)-(Reservoir)" title="Permalink"></a></h2><p>The model configuration (file <code>examples/error_examples/config_ex5_reservoir_A_noisotope.yaml</code>)  contains one <code>ReactionReservoirScalar</code> with <code>:field_data=ScalarData</code> where this species should have  <code>:field_data=IsotopeLinear</code>:</p><pre><code class="language-julia hljs">##################################################################
# ../reservoirs/config_ex5.yaml with common configuration errors
#################################################################

example5_reservoir_A_noisotope:
    parameters:
        EIsotope: IsotopeLinear    # hypothetical element E
    domains:
        fluxBoxes:
            reactions:
                flux:
                    class: ReactionFluxTarget
                    parameters:
                        target_prefix: flux_
                        fluxlist: [&quot;B::EIsotope&quot;]

        global:
            reactions:
                sum_E:
                    class: ReactionSum
                    parameters:
                        vars_to_add: [&quot;Box1.A&quot;, &quot;Box2.B&quot;]
                    variable_links:
                        sum: E_total

        Box1:
            # scalar domain
            
            reactions:
                reservoir_A:
                    class: ReactionReservoirScalar
                    parameters:
                        # configuration error:  :field_data not set to IsotopeLinear
                        # (defaults to ScalarData)
                        # field_data:         external%EIsotope
                    variable_links:
                        R*: A*
                    variable_attributes:
                        R:initial_value:    10.0
                        R:norm_value:       10.0            

                Adecay:
                    class: ReactionExample5
                    parameters:
                        field_data:         external%EIsotope
                        kappa:              0.5
                    variable_links:
                        input_particle*:    A*
                        output_flux:        fluxBoxes.flux_B
                    

        Box2:
            # scalar domain
        
            reactions:

                reservoir_B:
                    class: ReactionReservoirScalar
                    parameters:
                        field_data: external%EIsotope
                    variable_links:
                        R*: B*
                    variable_attributes:
                        R:initial_value:  0.0
                        R:norm_value:     10.0
                        R:initial_delta:  0.0

                transfer_fluxBoxes:
                    class: ReactionFluxTransfer
                    parameters:
                        input_fluxes: fluxBoxes.flux_$fluxname$
                        output_fluxes: $fluxname$_sms</code></pre><p>This results in an error when the Variables are linked:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt;       include(joinpath(ENV[&quot;PALEO_EXAMPLES&quot;], &quot;error_examples/run_ex5_reservoir_A_noisotope.jl&quot;))</code><code class="nohighlight hljs ansi" style="display:block;">[ Info: ================================================================================
[ Info: create_model_from_config file(s) [&quot;/home/runner/work/PALEOtutorials.jl/PALEOtutorials.jl/examples/error_examples/config_ex5_reservoir_A_noisotope.yaml&quot;] configmodel example5_reservoir_A_noisotope
[ Info: ================================================================================
[ Info:     Model parameter: EIsotope             = IsotopeLinear
[ Info: generated Reaction catalog with 29 Reactions
[ Info: creating domain &#39;global&#39; ID=1
[ Info:   creating reaction global.reactions.sum_E classname ReactionSum
[ Info:     set parameters: [config.yaml]  vars_to_add         =[&quot;Box1.A&quot;, &quot;Box2.B&quot;]
[ Info:     set parameters: [Default]      vars_prefix         =
[ Info:     set parameters: [Default]      component_to_add    =0
[ Info:     set parameters: [Default]      vectorsum           =false
[ Info: creating domain &#39;fluxBoxes&#39; ID=2
[ Info:   creating reaction fluxBoxes.reactions.flux classname ReactionFluxTarget
[ Info:     set parameters: [config.yaml]  fluxlist            =[&quot;B::EIsotope&quot;]
[ Info:     set parameters: [config.yaml]  target_prefix       =flux_
[ Info:     set parameters: [Default]      flux_totals         =false
[ Info:     set parameters: [Default]      const_stub          =false
[ Info: creating domain &#39;Box2&#39; ID=3
[ Info:   creating reaction Box2.reactions.reservoir_B classname ReactionReservoirScalar
[ Info:     set parameters: [config.yaml]  field_data          =external%EIsotope
[ Info:       expandvalue: external%EIsotope -&gt; IsotopeLinear
[ Info:       after substitution field_data=IsotopeLinear
[ Info:     set parameters: [Default]      const               =false
[ Info:   creating reaction Box2.reactions.transfer_fluxBoxes classname ReactionFluxTransfer
[ Info:     set parameters: [config.yaml]  input_fluxes        =fluxBoxes.flux_$fluxname$
[ Info:     set parameters: [config.yaml]  output_fluxes       =$fluxname$_sms
[ Info:     set parameters: [Default]      transfer_multiplier =1.0
[ Info:     set parameters: [Default]      transfer_matrix     =Identity
[ Info: creating domain &#39;Box1&#39; ID=4
[ Info:   creating reaction Box1.reactions.Adecay classname ReactionExample5
[ Info:     set parameters: [config.yaml]  kappa               =0.5
[ Info:     set parameters: [config.yaml]  field_data          =external%EIsotope
[ Info:       expandvalue: external%EIsotope -&gt; IsotopeLinear
[ Info:       after substitution field_data=IsotopeLinear
[ Info:     set parameters: [Default]      Delta               =-10.0
[ Info:   creating reaction Box1.reactions.reservoir_A classname ReactionReservoirScalar
[ Info:     set parameters: [Default]      field_data          =PALEOboxes.ScalarData
[ Info:     set parameters: [Default]      const               =false
[ Info: reaction global.sum_E add 1.0 * Box1.A
[ Info: reaction global.sum_E add 1.0 * Box2.B
[ Info: link_variables first pass
[ Info: link_variables initialize dynamic variables
[ Info: Reaction global.sum_E Variable global.E_total adding data=PALEOboxes.ScalarData
ERROR: LoadError: Reaction global.sum_E not all variables to be summed have the same :field_data Type: Box2.B PALEOboxes.IsotopeLinear != Box1.A PALEOboxes.ScalarData
in expression starting at /home/runner/work/PALEOtutorials.jl/PALEOtutorials.jl/examples/error_examples/run_ex5_reservoir_A_noisotope.jl:11</code></pre><h2 id="Mismatch-in-:field_data-Type-(eg-isotopes)-(Flux)"><a class="docs-heading-anchor" href="#Mismatch-in-:field_data-Type-(eg-isotopes)-(Flux)">Mismatch in :field_data Type (eg isotopes) (Flux)</a><a id="Mismatch-in-:field_data-Type-(eg-isotopes)-(Flux)-1"></a><a class="docs-heading-anchor-permalink" href="#Mismatch-in-:field_data-Type-(eg-isotopes)-(Flux)" title="Permalink"></a></h2><p>The model configuration (file <code>examples/error_examples/config_ex5_flux_noisotope.yaml</code>)  contains a Variable defined by a <code>ReactionFluxTarget</code> with default <code>:field_data=ScalarData</code> where this species should have  <code>:field_data=IsotopeLinear</code>:</p><pre><code class="language-julia hljs">##################################################################
# ../reservoirs/config_ex5.yaml with common configuration errors
#################################################################

example5_flux_noisotope:
    parameters:
        EIsotope: IsotopeLinear    # hypothetical element E
    domains:
        fluxBoxes:
            reactions:
                flux:
                    class: ReactionFluxTarget
                    parameters:
                        target_prefix: flux_
                        # configuration error: fluxlist not set to IsotopeLinear
                        # (defaults to ScalarData)
                        # fluxlist: [&quot;B::EIsotope&quot;]
                        fluxlist: [&quot;B&quot;]

        global:
            reactions:
                sum_E:
                    class: ReactionSum
                    parameters:
                        vars_to_add: [&quot;Box1.A&quot;, &quot;Box2.B&quot;]
                    variable_links:
                        sum: E_total

        Box1:
            # scalar domain
            
            reactions:
                reservoir_A:
                    class: ReactionReservoirScalar
                    parameters:
                        field_data:         external%EIsotope
                    variable_links:
                        R*: A*
                    variable_attributes:
                        R:initial_value:    10.0
                        R:norm_value:       10.0
                        R:initial_delta:    -10.0      

                Adecay:
                    class: ReactionExample5
                    parameters:
                        field_data:         external%EIsotope
                        kappa:              0.5
                    variable_links:
                        input_particle*:    A*
                        output_flux:        fluxBoxes.flux_B
                    

        Box2:
            # scalar domain
        
            reactions:

                reservoir_B:
                    class: ReactionReservoirScalar
                    parameters:
                        field_data: external%EIsotope
                    variable_links:
                        R*: B*
                    variable_attributes:
                        R:initial_value:  0.0
                        R:norm_value:     10.0
                        R:initial_delta:  0.0      

                transfer_fluxBoxes:
                    class: ReactionFluxTransfer
                    parameters:
                        input_fluxes: fluxBoxes.flux_$fluxname$
                        output_fluxes: $fluxname$_sms</code></pre><p>This results in an error when the Variables are linked:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt;       include(joinpath(ENV[&quot;PALEO_EXAMPLES&quot;], &quot;error_examples/run_ex5_flux_noisotope.jl&quot;))</code><code class="nohighlight hljs ansi" style="display:block;">[ Info: ================================================================================
[ Info: create_model_from_config file(s) [&quot;/home/runner/work/PALEOtutorials.jl/PALEOtutorials.jl/examples/error_examples/config_ex5_flux_noisotope.yaml&quot;] configmodel example5_flux_noisotope
[ Info: ================================================================================
[ Info:     Model parameter: EIsotope             = IsotopeLinear
[ Info: generated Reaction catalog with 29 Reactions
[ Info: creating domain &#39;global&#39; ID=1
[ Info:   creating reaction global.reactions.sum_E classname ReactionSum
[ Info:     set parameters: [config.yaml]  vars_to_add         =[&quot;Box1.A&quot;, &quot;Box2.B&quot;]
[ Info:     set parameters: [Default]      vars_prefix         =
[ Info:     set parameters: [Default]      component_to_add    =0
[ Info:     set parameters: [Default]      vectorsum           =false
[ Info: creating domain &#39;fluxBoxes&#39; ID=2
[ Info:   creating reaction fluxBoxes.reactions.flux classname ReactionFluxTarget
[ Info:     set parameters: [config.yaml]  fluxlist            =[&quot;B&quot;]
[ Info:     set parameters: [config.yaml]  target_prefix       =flux_
[ Info:     set parameters: [Default]      flux_totals         =false
[ Info:     set parameters: [Default]      const_stub          =false
[ Info: creating domain &#39;Box2&#39; ID=3
[ Info:   creating reaction Box2.reactions.reservoir_B classname ReactionReservoirScalar
[ Info:     set parameters: [config.yaml]  field_data          =external%EIsotope
[ Info:       expandvalue: external%EIsotope -&gt; IsotopeLinear
[ Info:       after substitution field_data=IsotopeLinear
[ Info:     set parameters: [Default]      const               =false
[ Info:   creating reaction Box2.reactions.transfer_fluxBoxes classname ReactionFluxTransfer
[ Info:     set parameters: [config.yaml]  input_fluxes        =fluxBoxes.flux_$fluxname$
[ Info:     set parameters: [config.yaml]  output_fluxes       =$fluxname$_sms
[ Info:     set parameters: [Default]      transfer_multiplier =1.0
[ Info:     set parameters: [Default]      transfer_matrix     =Identity
[ Info: creating domain &#39;Box1&#39; ID=4
[ Info:   creating reaction Box1.reactions.Adecay classname ReactionExample5
[ Info:     set parameters: [config.yaml]  kappa               =0.5
[ Info:     set parameters: [config.yaml]  field_data          =external%EIsotope
[ Info:       expandvalue: external%EIsotope -&gt; IsotopeLinear
[ Info:       after substitution field_data=IsotopeLinear
[ Info:     set parameters: [Default]      Delta               =-10.0
[ Info:   creating reaction Box1.reactions.reservoir_A classname ReactionReservoirScalar
[ Info:     set parameters: [config.yaml]  field_data          =external%EIsotope
[ Info:       expandvalue: external%EIsotope -&gt; IsotopeLinear
[ Info:       after substitution field_data=IsotopeLinear
[ Info:     set parameters: [Default]      const               =false
[ Info: reaction global.sum_E add 1.0 * Box1.A
[ Info: reaction global.sum_E add 1.0 * Box2.B
[ Info: link_variables first pass
[ Info: link_variables initialize dynamic variables
[ Info: Reaction global.sum_E Variable global.E_total adding data=PALEOboxes.IsotopeLinear
[ Info: _configure_variables: ReactionSum global.sum_E
[ Info:     set variable_links: sum                  -&gt; E_total
[ Info: _configure_variables: ReactionReservoirScalar Box2.reservoir_B
[ Info:     set variable_links: R                    -&gt; B
[ Info:     set variable_links: R_sms                -&gt; B_sms
[ Info:     set variable_links: R_norm               -&gt; B_norm
[ Info:     set variable_links: R_delta              -&gt; B_delta
[ Info:     set attribute: R                    :norm_value           = 10.0                 
[ Info:     set attribute: R                    :initial_value        = 0.0                  
[ Info:     set attribute: R                    :initial_delta        = 0.0                  
[ Info: _configure_variables: ReactionExample5 Box1.Adecay
[ Info:     set variable_links: input_particle       -&gt; A
[ Info:     set variable_links: input_particle_sms   -&gt; A_sms
[ Info:     set variable_links: input_particle_delta -&gt; A_delta
[ Info:     set variable_links: output_flux          -&gt; fluxBoxes.flux_B
[ Info: _configure_variables: ReactionReservoirScalar Box1.reservoir_A
[ Info:     set variable_links: R                    -&gt; A
[ Info:     set variable_links: R_sms                -&gt; A_sms
[ Info:     set variable_links: R_norm               -&gt; A_norm
[ Info:     set variable_links: R_delta              -&gt; A_delta
[ Info:     set attribute: R                    :norm_value           = 10.0                 
[ Info:     set attribute: R                    :initial_value        = 10.0                 
[ Info:     set attribute: R                    :initial_delta        = -10.0                
[ Info: link_variables second pass:
[ Info: link_variables unlinked variables:
[ Info: ================================================================================
[ Info: allocate_variables! (modeldata arrays_idx=1)
[ Info: ================================================================================
[ Info: Domain global               data dimensions PALEOboxes.NamedDimension[] allocating 1    variables (hostdep=nothing)
[ Info: Domain fluxBoxes            data dimensions PALEOboxes.NamedDimension[] allocating 1    variables (hostdep=nothing)
[ Info: Domain Box2                 data dimensions PALEOboxes.NamedDimension[] allocating 4    variables (hostdep=nothing)
[ Info: Domain Box1                 data dimensions PALEOboxes.NamedDimension[] allocating 5    variables (hostdep=nothing)
┌ Info: SolverView:
│     host-dependent Variables:
│     ------------------------------------------------------------------------------------------------------------------------------
│     Domain                  operatorID  VF_StateExplicit  VF_Total          VF_Constraint     VF_State          VF_Undefined      
│     global                  0           0                 0                 0                 0                 0                 
│     fluxBoxes               0           0                 0                 0                 0                 0                 
│     Box2                    0           1                 0                 0                 0                 0                 
│     Box1                    0           1                 0                 0                 0                 0                 
│     ------------------------------------------------------------------------------------------------------------------------------
│     Total                   -           2                 0                 0                 0                 0                 
│     ------------------------------------------------------------------------------------------------------------------------------
│   n_state_vars 2  (stateexplicit 2 + state 0)
│   n_equations 2  (stateexplicit 2 + total 0 + constraint 0)
│   including all host-dependent non-state Variables
└   host-dependent non-state Variables (:vfunction PB.VF_Undefined): Any[]
[ Info: ================================================================================
[ Info: initialize_reactiondata! (modeldata arrays_indices=1:1)
[ Info: ================================================================================
┌ Warning: create_accessor: VariableReaction Box1.Adecay.do_example5.output_flux  -&gt;  fluxBoxes.flux_B:  invalid :field_data combination - attempting to link a Variable with :field_data=PALEOboxes.IsotopeLinear to a Variable with :field_data=PALEOboxes.ScalarData
└ @ PALEOboxes ~/.julia/packages/PALEOboxes/kPOmB/src/VariableReaction.jl:741
ERROR: LoadError: MethodError: no method matching create_accessor(::Type{PALEOboxes.IsotopeLinear}, ::PALEOboxes.Field{PALEOboxes.ScalarData, PALEOboxes.CellSpace, Vector{Float64}, 0, Nothing}, ::Nothing; forceview=false, components=false)
Closest candidates are:
  create_accessor(::Union{Type{D}, Type{PALEOboxes.UndefinedData}}, !Matched::PALEOboxes.Field{D, S, V, N, M}, ::Union{Nothing, PALEOboxes.AbstractSubdomain}; forceview, components) where {D, S, V, N, M} at ~/.julia/packages/PALEOboxes/kPOmB/src/Fields.jl:440
  create_accessor(!Matched::Type{PALEOboxes.ScalarData}, !Matched::PALEOboxes.Field{PALEOboxes.IsotopeLinear, S, V, W, M}, ::Union{Nothing, PALEOboxes.AbstractSubdomain}; forceview, components) where {S, V, W, M} at ~/.julia/packages/PALEOboxes/kPOmB/src/data/IsotopeData.jl:380
in expression starting at /home/runner/work/PALEOtutorials.jl/PALEOtutorials.jl/examples/error_examples/run_ex5_flux_noisotope.jl:20</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../solvers/README/">« ODE solvers</a><a class="docs-footer-nextpage" href="../../CPU/README/">CPU (Carbon, Phosphorus, Uranium) model »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Thursday 24 August 2023 13:12">Thursday 24 August 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
