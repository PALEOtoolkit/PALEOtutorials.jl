<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Julia and VS code usage · PALEOtutorials Documentation</title><meta name="title" content="Julia and VS code usage · PALEOtutorials Documentation"/><meta property="og:title" content="Julia and VS code usage · PALEOtutorials Documentation"/><meta property="twitter:title" content="Julia and VS code usage · PALEOtutorials Documentation"/><meta name="description" content="Documentation for PALEOtutorials Documentation."/><meta property="og:description" content="Documentation for PALEOtutorials Documentation."/><meta property="twitter:description" content="Documentation for PALEOtutorials Documentation."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">PALEOtutorials Documentation</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">PALEOtutorials.jl documentation</a></li><li><span class="tocitem">Examples and Tutorials</span><ul><li><a class="tocitem" href="../ExampleInstallConfig/">Installation and getting started</a></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">reservoirs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../collated_examples/reservoirs/README/">Reservoirs and fluxes</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-3" type="checkbox"/><label class="tocitem" for="menuitem-2-3"><span class="docs-label">solvers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../collated_examples/solvers/README/">ODE solvers</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-4" type="checkbox"/><label class="tocitem" for="menuitem-2-4"><span class="docs-label">error_examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../collated_examples/error_examples/README/">Configuration Errors</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-5" type="checkbox"/><label class="tocitem" for="menuitem-2-5"><span class="docs-label">CPU</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../collated_examples/CPU/README/">CPU (Carbon, Phosphorus, Uranium) model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-6" type="checkbox"/><label class="tocitem" for="menuitem-2-6"><span class="docs-label">CPU_modular</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../collated_examples/CPU_modular/README/">CPU (Carbon, Phosphorus, Uranium) model</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-7" type="checkbox"/><label class="tocitem" for="menuitem-2-7"><span class="docs-label">ocean_chemistry</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../collated_examples/ocean_chemistry/README/">Ocean chemistry</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-8" type="checkbox"/><label class="tocitem" for="menuitem-2-8"><span class="docs-label">configurable_chemistry</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../collated_examples/configurable_chemistry/README/">Configurable chemistry using PALEOaqchem</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-9" type="checkbox"/><label class="tocitem" for="menuitem-2-9"><span class="docs-label">NAPC_tutorial</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../collated_examples/NAPC_tutorial/README/">Shelf Sea Tutorial</a></li></ul></li></ul></li><li><span class="tocitem">Design</span><ul><li><a class="tocitem" href="../ComponentsWorkflow/">PALEOtoolkit components and workflow</a></li></ul></li><li><span class="tocitem">HOWTOS</span><ul><li><a class="tocitem" href="../HOWTOshowmodelandoutput/">Displaying model configuration and output from the Julia REPL</a></li><li class="is-active"><a class="tocitem" href>Julia and VS code usage</a><ul class="internal"><li><a class="tocitem" href="#Julia-resources"><span>Julia resources</span></a></li><li><a class="tocitem" href="#Always-use-Revise.jl"><span>Always use Revise.jl</span></a></li><li><a class="tocitem" href="#Use-Infiltrator.jl-for-debugging"><span>Use Infiltrator.jl for debugging</span></a></li><li><a class="tocitem" href="#Install-the-VS-code-yaml-extension"><span>Install the VS code yaml extension</span></a></li><li><a class="tocitem" href="#Julia-best-practices"><span>Julia best practices</span></a></li><li><a class="tocitem" href="#Julia-bugs/gotchas"><span>Julia bugs/gotchas</span></a></li><li><a class="tocitem" href="#Julia-performance-issues/gotchas"><span>Julia performance issues/gotchas</span></a></li></ul></li><li><a class="tocitem" href="../HOWTOadditionalconfig/">Optional additional configuration</a></li><li><a class="tocitem" href="../HOWTOminimalGit/">Minimal git workflow for scientific collaboration and reproducibility</a></li><li><a class="tocitem" href="../HOWTOdocumentation/">Creating and updating PALEO documentation</a></li></ul></li><li><a class="tocitem" href="../References/">References</a></li><li><a class="tocitem" href="../indexpage/">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">HOWTOS</a></li><li class="is-active"><a href>Julia and VS code usage</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Julia and VS code usage</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/PALEOtoolkit/PALEOtutorials.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/PALEOtoolkit/PALEOtutorials.jl/blob/main/docs/src/HOWTOJuliaUsage.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Julia-and-VS-code-usage"><a class="docs-heading-anchor" href="#Julia-and-VS-code-usage">Julia and VS code usage</a><a id="Julia-and-VS-code-usage-1"></a><a class="docs-heading-anchor-permalink" href="#Julia-and-VS-code-usage" title="Permalink"></a></h1><h2 id="Julia-resources"><a class="docs-heading-anchor" href="#Julia-resources">Julia resources</a><a id="Julia-resources-1"></a><a class="docs-heading-anchor-permalink" href="#Julia-resources" title="Permalink"></a></h2><ul><li>Julia homepage <a href="https://julialang.org/">https://julialang.org/</a> (see links to <code>Documentation</code> and a curated list of tutorials, books, etc under <code>Learn</code>)</li><li>Julia cheatsheet: <a href="https://juliadocs.github.io/Julia-Cheat-Sheet">https://juliadocs.github.io/Julia-Cheat-Sheet</a></li><li>Matlab-Python-Julia cheatsheet: <a href="https://cheatsheets.quantecon.org">https://cheatsheets.quantecon.org</a> (NB: the first example on Creating Vectors is misleading - use 1d Arrays in Julia!)</li></ul><h2 id="Always-use-Revise.jl"><a class="docs-heading-anchor" href="#Always-use-Revise.jl">Always use Revise.jl</a><a id="Always-use-Revise.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Always-use-Revise.jl" title="Permalink"></a></h2><p>This tracks changes and automatically updates code run from a REPL session.</p><pre><code class="nohighlight hljs">julia&gt; using Revise</code></pre><p>VS code has an option to automatically load Revise.jl at startup (enabled by default).</p><h2 id="Use-Infiltrator.jl-for-debugging"><a class="docs-heading-anchor" href="#Use-Infiltrator.jl-for-debugging">Use Infiltrator.jl for debugging</a><a id="Use-Infiltrator.jl-for-debugging-1"></a><a class="docs-heading-anchor-permalink" href="#Use-Infiltrator.jl-for-debugging" title="Permalink"></a></h2><p><a href="https://github.com/JuliaDebug/Infiltrator.jl">https://github.com/JuliaDebug/Infiltrator.jl</a></p><p>The Debugger.jl built in to VSCode is an interpreter (Interpreter.jl), and is unusably slow for PALEO.</p><h2 id="Install-the-VS-code-yaml-extension"><a class="docs-heading-anchor" href="#Install-the-VS-code-yaml-extension">Install the VS code yaml extension</a><a id="Install-the-VS-code-yaml-extension-1"></a><a class="docs-heading-anchor-permalink" href="#Install-the-VS-code-yaml-extension" title="Permalink"></a></h2><p>A VS code yaml extension is now available, https://marketplace.visualstudio.com/items?itemName=redhat.vscode-yaml, this will flag errors in the PALEO yaml configuration files when opened in the VS code editor.</p><p>NB: The Julia <a href="https://github.com/JuliaData/YAML.jl">YAML.jl</a> parser allows duplicate keys (later key overwrites earlier) <a href="https://github.com/PALEOtoolkit/PALEOboxes.jl/issues/43">https://github.com/PALEOtoolkit/PALEOboxes.jl/issues/43</a>. This is easy to hit when generating model configurations, the VS code yaml linter will catch this and other errors. If all else fails, check the .yaml file using an online validator eg <a href="http://www.yamllint.com/">http://www.yamllint.com/</a>.</p><h2 id="Julia-best-practices"><a class="docs-heading-anchor" href="#Julia-best-practices">Julia best practices</a><a id="Julia-best-practices-1"></a><a class="docs-heading-anchor-permalink" href="#Julia-best-practices" title="Permalink"></a></h2><ul><li>Performance tips: <a href="https://docs.julialang.org/en/v1/manual/performance-tips/">https://docs.julialang.org/en/v1/manual/performance-tips/</a></li><li>Julia antipatterns: <a href="https://www.oxinabox.net/2020/04/19/Julia-Antipatterns.html">https://www.oxinabox.net/2020/04/19/Julia-Antipatterns.html</a></li><li>Batch usage: <a href="https://github.com/CliMA/ClimateMachine.jl/wiki/Caltech-Central-Cluster">https://github.com/CliMA/ClimateMachine.jl/wiki/Caltech-Central-Cluster</a></li></ul><h2 id="Julia-bugs/gotchas"><a class="docs-heading-anchor" href="#Julia-bugs/gotchas">Julia bugs/gotchas</a><a id="Julia-bugs/gotchas-1"></a><a class="docs-heading-anchor-permalink" href="#Julia-bugs/gotchas" title="Permalink"></a></h2><ul><li>Continuation lines in multi-line formulas can silently fail (this is easy to hit when copying across Fortran code). Workaround - add brackets.</li><li>Debug in VSCode is very slow. Use <a href="https://github.com/JuliaDebug/Infiltrator.jl">Infiltrator.jl</a> instead.</li><li>Legends on subplots are merged with some backends eg plotlyjs (<a href="https://github.com/JuliaPlots/Plots.jl/issues/673">https://github.com/JuliaPlots/Plots.jl/issues/673</a>). Workaround - use a different backend for multiple-panel plots.</li><li><a href="https://juliadocs.github.io/Documenter.jl/stable/man/doctests/">jldoctest</a> fails if there is an initial blank line (apparent off-by-one in input and validation output). TODO report.</li></ul><h2 id="Julia-performance-issues/gotchas"><a class="docs-heading-anchor" href="#Julia-performance-issues/gotchas">Julia performance issues/gotchas</a><a id="Julia-performance-issues/gotchas-1"></a><a class="docs-heading-anchor-permalink" href="#Julia-performance-issues/gotchas" title="Permalink"></a></h2><p>NB: the only place this matters in PALEO is for the model main loop.  Everything else is non-performance critical.  The <code>PALEOboxes.TestUtils.bench_model</code> function provides a convenient way of benchmarking a model and identifying problem Reactions (where all Reactions in the registered PALEO packages should have zero allocations).</p><ul><li>It is easy to write code which is &#39;type unstable&#39;, or generates memory allocations, which then gives low performance, see &#39;Performance tips&#39; above.</li><li>Iterating over tuples: really need a <code>foreach</code> that is optimised eg <a href="https://github.com/JuliaLang/julia/issues/31869">https://github.com/JuliaLang/julia/issues/31869</a>, <a href="https://discourse.julialang.org/t/manually-unroll-operations-with-objects-of-tuple/11604">https://discourse.julialang.org/t/manually-unroll-operations-with-objects-of-tuple/11604</a>. PALEO provides <code>PALEOboxes.foreach_longtuple</code>.</li><li>@views for sparse matrices reverts to slow (dense) pathways (<a href="https://stackoverflow.com/questions/58699267/julia-view-of-sparse-matrix">https://stackoverflow.com/questions/58699267/julia-view-of-sparse-matrix</a>, <a href="https://github.com/JuliaLang/julia/issues/21796">https://github.com/JuliaLang/julia/issues/21796</a>) (update - much improved in Julia 1.6 according to updates to these posts)</li><li><a href="https://github.com/eschnett/SIMD.jl">SIMD.jl</a> is missing optimized vectorized intrinsics (exp, log etc). PALEO provides workaround ins <code>PALEOboxes.SIMDutils.jl</code>, implemented using SLEEF.</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../HOWTOshowmodelandoutput/">« Displaying model configuration and output from the Julia REPL</a><a class="docs-footer-nextpage" href="../HOWTOadditionalconfig/">Optional additional configuration »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Thursday 18 July 2024 14:20">Thursday 18 July 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
